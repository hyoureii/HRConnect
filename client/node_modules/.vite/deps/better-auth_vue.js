import {
  createDynamicPathProxy,
  getClientConfig
} from "./chunk-NDMXMF2B.js";
import "./chunk-2YLHI72I.js";
import "./chunk-EGRHWZRV.js";
import {
  getCurrentInstance,
  getCurrentScope,
  onScopeDispose,
  readonly,
  shallowRef
} from "./chunk-FDK6WDET.js";
import "./chunk-EGRHWZRV.js";
import {
  capitalizeFirstLetter
} from "./chunk-FX76KL3M.js";
import "./chunk-G3PMV62Z.js";

// ../node_modules/.bun/better-auth@1.4.10+dff6582bb4965509/node_modules/better-auth/dist/client/vue/vue-store.mjs
function registerStore(store) {
  let instance = getCurrentInstance();
  if (instance && instance.proxy) {
    let vm = instance.proxy;
    ("_nanostores" in vm ? vm._nanostores : vm._nanostores = []).push(store);
  }
}
function useStore(store) {
  let state = shallowRef();
  let unsubscribe = store.subscribe((value) => {
    state.value = value;
  });
  if (getCurrentScope()) onScopeDispose(unsubscribe);
  if (true) {
    registerStore(store);
    return readonly(state);
  }
  return state;
}

// ../node_modules/.bun/better-auth@1.4.10+dff6582bb4965509/node_modules/better-auth/dist/client/vue/index.mjs
function getAtomKey(str) {
  return `use${capitalizeFirstLetter(str)}`;
}
function createAuthClient(options) {
  const { baseURL, pluginPathMethods, pluginsActions, pluginsAtoms, $fetch, $store, atomListeners } = getClientConfig(options, false);
  let resolvedHooks = {};
  for (const [key, value] of Object.entries(pluginsAtoms)) resolvedHooks[getAtomKey(key)] = () => useStore(value);
  function useSession(useFetch) {
    if (useFetch) {
      const ref = useStore(pluginsAtoms.$sessionSignal);
      return useFetch(`${baseURL}/get-session`, { ref }).then((res) => {
        return {
          data: res.data,
          isPending: false,
          error: res.error
        };
      });
    }
    return resolvedHooks.useSession();
  }
  return createDynamicPathProxy({
    ...pluginsActions,
    ...resolvedHooks,
    useSession,
    $fetch,
    $store
  }, $fetch, pluginPathMethods, pluginsAtoms, atomListeners);
}
export {
  createAuthClient
};
//# sourceMappingURL=better-auth_vue.js.map
