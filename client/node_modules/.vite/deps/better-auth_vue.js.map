{
  "version": 3,
  "sources": ["../../../../node_modules/.bun/better-auth@1.4.10+dff6582bb4965509/node_modules/better-auth/src/client/vue/vue-store.ts", "../../../../node_modules/.bun/better-auth@1.4.10+dff6582bb4965509/node_modules/better-auth/src/client/vue/index.ts"],
  "sourcesContent": ["import type { Store, StoreValue } from \"nanostores\";\nimport type { DeepReadonly, ShallowRef, UnwrapNestedRefs } from \"vue\";\nimport {\n\tgetCurrentInstance,\n\tgetCurrentScope,\n\tonScopeDispose,\n\treadonly,\n\tshallowRef,\n} from \"vue\";\n\nfunction registerStore(store: Store) {\n\tlet instance = getCurrentInstance();\n\tif (instance && instance.proxy) {\n\t\tlet vm = instance.proxy as any;\n\t\tlet cache = \"_nanostores\" in vm ? vm._nanostores : (vm._nanostores = []);\n\t\tcache.push(store);\n\t}\n}\n\nexport function useStore<\n\tSomeStore extends Store,\n\tValue extends StoreValue<SomeStore>,\n>(store: SomeStore): DeepReadonly<UnwrapNestedRefs<ShallowRef<Value>>> {\n\tlet state = shallowRef();\n\n\tlet unsubscribe = store.subscribe((value) => {\n\t\tstate.value = value;\n\t});\n\n\tif (getCurrentScope()) onScopeDispose(unsubscribe);\n\n\tif (process.env.NODE_ENV !== \"production\") {\n\t\tregisterStore(store);\n\t\treturn readonly(state);\n\t}\n\treturn state;\n}\n", "import type {\n\tBetterAuthClientOptions,\n\tBetterAuthClientPlugin,\n} from \"@better-auth/core\";\nimport type { BASE_ERROR_CODES } from \"@better-auth/core/error\";\nimport { capitalizeFirstLetter } from \"@better-auth/core/utils\";\nimport type {\n\tBetterFetchError,\n\tBetterFetchResponse,\n} from \"@better-fetch/fetch\";\nimport type { DeepReadonly, Ref } from \"vue\";\nimport type { PrettifyDeep, UnionToIntersection } from \"../../types/helper\";\nimport { getClientConfig } from \"../config\";\nimport { createDynamicPathProxy } from \"../proxy\";\nimport type {\n\tInferActions,\n\tInferClientAPI,\n\tInferErrorCodes,\n\tIsSignal,\n} from \"../types\";\nimport { useStore } from \"./vue-store\";\n\nfunction getAtomKey(str: string) {\n\treturn `use${capitalizeFirstLetter(str)}`;\n}\n\ntype InferResolvedHooks<O extends BetterAuthClientOptions> = O extends {\n\tplugins: Array<infer Plugin>;\n}\n\t? UnionToIntersection<\n\t\t\tPlugin extends BetterAuthClientPlugin\n\t\t\t\t? Plugin[\"getAtoms\"] extends (fetch: any) => infer Atoms\n\t\t\t\t\t? Atoms extends Record<string, any>\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t[key in keyof Atoms as IsSignal<key> extends true\n\t\t\t\t\t\t\t\t\t? never\n\t\t\t\t\t\t\t\t\t: key extends string\n\t\t\t\t\t\t\t\t\t\t? `use${Capitalize<key>}`\n\t\t\t\t\t\t\t\t\t\t: never]: () => DeepReadonly<\n\t\t\t\t\t\t\t\t\tRef<ReturnType<Atoms[key][\"get\"]>>\n\t\t\t\t\t\t\t\t>;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t: {}\n\t\t\t\t\t: {}\n\t\t\t\t: {}\n\t\t>\n\t: {};\n\nexport function createAuthClient<Option extends BetterAuthClientOptions>(\n\toptions?: Option | undefined,\n) {\n\tconst {\n\t\tbaseURL,\n\t\tpluginPathMethods,\n\t\tpluginsActions,\n\t\tpluginsAtoms,\n\t\t$fetch,\n\t\t$store,\n\t\tatomListeners,\n\t} = getClientConfig(options, false);\n\tlet resolvedHooks: Record<string, any> = {};\n\tfor (const [key, value] of Object.entries(pluginsAtoms)) {\n\t\tresolvedHooks[getAtomKey(key)] = () => useStore(value);\n\t}\n\n\ttype ClientAPI = InferClientAPI<Option>;\n\ttype Session = ClientAPI extends {\n\t\tgetSession: () => Promise<infer Res>;\n\t}\n\t\t? Res extends BetterFetchResponse<infer S>\n\t\t\t? S\n\t\t\t: Res extends Record<string, any>\n\t\t\t\t? Res\n\t\t\t\t: never\n\t\t: never;\n\n\tfunction useSession(): DeepReadonly<\n\t\tRef<{\n\t\t\tdata: Session;\n\t\t\tisPending: boolean;\n\t\t\tisRefetching: boolean;\n\t\t\terror: BetterFetchError | null;\n\t\t}>\n\t>;\n\tfunction useSession<F extends (...args: any) => any>(\n\t\tuseFetch: F,\n\t): Promise<{\n\t\tdata: Ref<Session>;\n\t\tisPending: false; //this is just to be consistent with the default hook\n\t\terror: Ref<{\n\t\t\tmessage?: string | undefined;\n\t\t\tstatus: number;\n\t\t\tstatusText: string;\n\t\t}>;\n\t}>;\n\tfunction useSession<UseFetch extends <_T>(...args: any) => any>(\n\t\tuseFetch?: UseFetch | undefined,\n\t) {\n\t\tif (useFetch) {\n\t\t\tconst ref = useStore(pluginsAtoms.$sessionSignal!);\n\t\t\treturn useFetch(`${baseURL}/get-session`, {\n\t\t\t\tref,\n\t\t\t}).then((res: any) => {\n\t\t\t\treturn {\n\t\t\t\t\tdata: res.data,\n\t\t\t\t\tisPending: false,\n\t\t\t\t\terror: res.error,\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t\treturn resolvedHooks.useSession();\n\t}\n\n\tconst routes = {\n\t\t...pluginsActions,\n\t\t...resolvedHooks,\n\t\tuseSession,\n\t\t$fetch,\n\t\t$store,\n\t};\n\n\tconst proxy = createDynamicPathProxy(\n\t\troutes,\n\t\t$fetch,\n\t\tpluginPathMethods,\n\t\tpluginsAtoms,\n\t\tatomListeners,\n\t);\n\n\treturn proxy as UnionToIntersection<InferResolvedHooks<Option>> &\n\t\tInferClientAPI<Option> &\n\t\tInferActions<Option> & {\n\t\t\tuseSession: typeof useSession;\n\t\t\t$Infer: {\n\t\t\t\tSession: NonNullable<Session>;\n\t\t\t};\n\t\t\t$fetch: typeof $fetch;\n\t\t\t$store: typeof $store;\n\t\t\t$ERROR_CODES: PrettifyDeep<\n\t\t\t\tInferErrorCodes<Option> & typeof BASE_ERROR_CODES\n\t\t\t>;\n\t\t};\n}\n\nexport type * from \"@better-fetch/fetch\";\nexport type * from \"nanostores\";\nexport type * from \"../../types/helper\";\nexport type { UnionToIntersection } from \"../../types/helper\";\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAUA,SAAS,cAAc,OAAc;AACpC,MAAI,WAAW,mBAAA;AACf,MAAI,YAAY,SAAS,OAAO;AAC/B,QAAI,KAAK,SAAS;AAElB,KADY,iBAAiB,KAAK,GAAG,cAAe,GAAG,cAAc,CAAA,GAC/D,KAAK,KAAA;;;AAIb,SAAgB,SAGd,OAAqE;AACtE,MAAI,QAAQ,WAAA;AAEZ,MAAI,cAAc,MAAM,UAAA,CAAW,UAAU;AAC5C,UAAM,QAAQ;;AAGf,MAAI,gBAAA,EAAmB,gBAAe,WAAA;AAEtC,MAAI,MAAuC;AAC1C,kBAAc,KAAA;AACd,WAAO,SAAS,KAAA;;AAEjB,SAAO;;;;ACbR,SAAS,WAAW,KAAa;AAChC,SAAO,MAAM,sBAAsB,GAAA,CAAI;;AAyBxC,SAAgB,iBACf,SACC;AACD,QAAM,EACL,SACA,mBACA,gBACA,cACA,QACA,QACA,cAAA,IACG,gBAAgB,SAAS,KAAA;AAC7B,MAAIA,gBAAqC,CAAA;AACzC,aAAW,CAAC,KAAK,KAAA,KAAU,OAAO,QAAQ,YAAA,EACzC,eAAc,WAAW,GAAA,CAAI,IAAA,MAAU,SAAS,KAAA;AAiCjD,WAAS,WACR,UACC;AACD,QAAI,UAAU;AACb,YAAM,MAAM,SAAS,aAAa,cAAA;AAClC,aAAO,SAAS,GAAG,OAAA,gBAAuB,EACzC,IAAA,CACA,EAAE,KAAA,CAAM,QAAa;AACrB,eAAO;UACN,MAAM,IAAI;UACV,WAAW;UACX,OAAO,IAAI;;;;AAId,WAAO,cAAc,WAAA;;AAmBtB,SARc,uBARC;IACd,GAAG;IACH,GAAG;IACH;IACA;IACA;KAKA,QACA,mBACA,cACA,aAAA;;",
  "names": ["resolvedHooks: Record<string, any>"]
}
